<div
  locations-departments-directive
  class="location-department-container"
  >
  <p class="page-title">Locations & Departments</p>
  <div class="grid grid-cols-1 gap-8">
    <!-- Work Locations -->
    <div class="grid grid-layout-one gap-4">
      <div>
        <p class="ui-label-lg mb-2"> Work Locations </p>
        <div class="ui-card border-color border-solid">
          <div class="bottom-border">
            <button
              type="button"
              ng-click="addLocation()"
              class="ui-btn ui-btn-link text-blue-500 hover:bg-blue-100 w-full h-10"
            >
              <svg
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                class="w-5 h-5 mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
              Add Work Location
            </button>
          </div>
          <div>
            <div class="grid grid-cols-1 gap-2">
              <div ng-repeat="location in workLocations">
                <div class="ui-card-inner bottom-border">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="ui-label-md" ng-bind="location.location_name"></p>
                    </div>
                    <div class="w-64">
                      <p class="ui-label">
                        <span ng-bind="location.business_address"></span>
                        <span ng-bind="location.unit"></span>
                        <span ng-bind="location.building"></span>,
                        <span ng-bind="location.country"></span>
                        <span ng-bind="location.postal_code"></span>
                      </p>
                      <p class="ui-label text-teal-600">
                        <span ng-bind="location.employees"></span>
                        Current Employees
                      </p>
                    </div>
                    <div class="flex flex-col items-end justify-between space-y-8">
                      <button
                        type="button"
                        class="ui-btn ui-btn-primary-outline w-24"
                        ng-click="editLocation(location)"
                        >
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        Edit
                      </button>
                      <button
                        type="button"
                        ng-click="allocateEmployees(location)"
                        class="ui-btn ui-btn-link text-blue-500 hover:bg-blue-100 w-full h-10"
                      >
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                          Allocate Employees
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End work locations-->

    <!-- Departments -->
    <div class="grid grid-layout-one gap-4">
      <div>
        <p class="ui-label-lg mb-2"> Departments </p>
        <div class="ui-card border-color border-solid">
          <div>
              <div class="bottom-border">
                <button
                  type="button"
                  ng-click="addDepartment()"
                  class="ui-btn ui-btn-link text-blue-500 hover:bg-blue-100 w-full h-10"
                >
                  <svg
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    class="w-5 h-5 mr-2">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                  Add Departments
                </button>
            </div>
            <div class="grid grid-cols-1 gap-2">
              <div ng-repeat="department in departments">
                <div class="ui-card-inner bottom-border">
                  <div class="flex items-center justify-between">
                    <div class="w-40">
                      <p class="ui-label-md">
                        {{ department.name }}
                      </p>
                    </div>
                    <div class="w-64">
                      <p class="ui-label text-teal-600 text-center">
                        {{ department.employees }}
                        Current Employees
                      </p>
                    </div>
                    <div class="flex items-center space-x-4 flex-wrap">
                      <button
                        type="button"
                        ng-click="allocateEmployees(location, 'departments')"
                        class="ui-btn ui-btn-link text-blue-500 hover:bg-blue-100 h-10"
                      >
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                          Allocate Employees
                      </button>
                      <button
                        type="button"
                        ng-click="editDepartment(department)"
                        class="ui-btn ui-btn-primary-outline w-24"
                        >
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-5 h-5 mr-2"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        Edit
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End departments -->
  </div>

  <!-- Location Modal -->
  <div class="modal fade" id="{{ modals.location }}" tabindex="-1" role="dialog"
    aria-labelledby="location-modal" aria-hidden="true">
    <div class="modal-dialog max-w-2xl bg-transparent mt-32" role="document">
      <div class="modal-content">
        <div class="modal-body py-0">
          <div class="py-1 px-16">
            <form name="locationModal" class="flex flex-col items-center justify-between space-y-8 pt-6">
              <h4 class="section-title font-bold">
                {{ isEditing() ? 'Edit Work Location' : 'Add Work Location' }}
              </h4>
              <div class="w-full">
                <div class="grid grid-cols-1 gap-4">
                  <div>
                    <label class="form-label">Work Location Name</label>
                    <div class="form-input-group">
                      <input
                        class="form-input"
                        required
                        ng-model="workLocationFields.location_name"
                        type="text"
                      >
                    </div>
                  </div>
                  <div>
                    <label class="form-label">Business Legal Address</label>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                      <div class="form-input-group col-span-1 md:col-span-2">
                        <input
                          class="form-input"
                          required
                          ng-model="workLocationFields.business_address"
                          type="text"
                          >
                      </div>
                      <div class="form-input-group">
                        <input
                          class="form-input"
                          type="text"
                          required
                          ng-model="workLocationFields.unit"
                          >
                      </div>
                      <div class="form-input-group">
                        <input
                          class="form-input"
                          type="text"
                          required
                          ng-model="workLocationFields.building"
                          >
                      </div>
                    </div>
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div class="col-span-2">
                      <label class="form-label">
                        Country Incorporated
                      </label>
                      <div class="btn-group dropup w-full">
                        <button
                          type="button"
                          class="ui-btn ui-btn-white dropdown-toggle w-full justify-between"
                          data-toggle="dropdown"
                          aria-haspopup="true"
                          aria-expanded="false">
                          {{ workLocationFields.country }}
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="w-4 text-gray-600" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                          </svg>
                        </button>
                        <input
                          ng-model="workLocationFields.country"
                          class="hidden"
                          required
                          readonly
                        >
                        <ul class="dropdown-menu">
                          <li ng-repeat="country in countries">
                            <a
                              ng-click="setField('country', country.name)"
                              class="flex items-center space-x-2">
                              <img src="{{ country.flag }}" class="w-6" alt="">
                              {{ country.name }}
                            </a>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-span-1">
                      <label class="form-label">
                        Postal Code
                      </label>
                      <div class="form-input-group">
                        <input
                          class="form-input"
                          type="text"
                          required
                          ng-model="workLocationFields.postal_code"
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2">
                <div>
                  <button
                    ng-if="isEditing()"
                    ng-click="removeLocation()"
                    class="ui-btn ui-btn-danger-outline"
                  >
                    Remove
                  </button>
                </div>
                <div class="flex items-center justify-end space-x-4 w-full pb-8">
                  <button
                    ng-click="presentModal(modals.location, false)"
                    type="button"
                    class="ui-btn ui-btn-primary-outline"
                    >
                    Cancel
                  </button>
                  <button
                    type="button"
                    ng-disabled="!locationModal.$dirty && locationModal.$invalid"
                    class="ui-btn {{ locationModal.$dirty && locationModal.$valid ? 'ui-btn-primary ' : 'ui-btn-disabled' }} w-48"
                    ng-click="saveLocation()">
                    {{ isEditing() ? 'Update' : 'Add Location' }}
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End location modal -->

  <!-- Employee Allocation Modal -->
  <div class="modal fade px-32" id="{{ modals.allocation }}" tabindex="-1" role="dialog"
    aria-labelledby="{{ modals.allocation }}" aria-hidden="true">
    <div class="modal-dialog w-full bg-transparent mt-32" role="document">
      <div class="modal-content">
        <div class="modal-body py-0">
          <div class="py-4 px-10">
            <form name="{{ _.camelCase(modals.allocation) }}" class="flex flex-col items-center justify-between space-y-8">
              <h4 class="section-title font-bold">
                Allocate Employees
              </h4>
              <div class="flex items-start justify-center space-x-12 w-full">
                <div class="grid grid-cols-1 gap-4 w-1/2">
                  <div class="relative w-full form-input-group">
                    <svg
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        class="absolute text-gray-600 w-5 h-5 ml-2 left-0">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                    </svg>
                    <input
                        class="form-input pl-5 text-gray-600"
                        type="text"
                        placeholder="Search by name"
                        ng-model="filters.search"
                    >
                  </div>
                  <div>
                    <label class="section-title text-sm mb-1">
                      Enrolled Employee Names
                    </label>
                    <div class="flex flex-col h-56 overflow-y-scroll">
                      <label ng-repeat="employee in employees">
                        <input
                          class="mr-2 leading-tight ui-checkbox"
                          type="checkbox"
                          ng-checked="employeeChecked(employee)"
                          ng-click="onCheck(employee)"
                          >
                        <span class="pl-2 text-sm text-gray-900">
                          {{ employee.name }}
                        </span>
                      </label>
                    </div>
                  </div>
                  <div class="flex items-center justify-end space-x-4 w-full py-6">
                    <button ng-click="presentModal(modals.allocation, false)" type="button" class="ui-btn ui-btn-primary-outline">
                      Cancel
                    </button>
                    <button
                      type="button"
                      ng-disabled="selectedEmployees.length <= 0"
                      class="ui-btn {{ selectedEmployees.length > 0 ? 'ui-btn-primary ' : 'ui-btn-disabled' }} w-48"
                      ng-click="saveAllocation()"
                      >
                      Allocate Employees
                    </button>
                  </div>
                </div>
                <div class="h-84 w-1 border-l border-r-0 border-t-0 border-b-0 border-solid border-color"></div>
                <div class="w-1/2">
                  <label class="section-title text-sm mb-1">
                    Selected Employees ({{ selectedEmployees.length }})
                  </label>
                  <div class="flex flex-col h-64 pr-4 overflow-y-scroll" ng-if="selectedEmployees.length > 0">
                    <div
                      ng-repeat="selectedEmployee in selectedEmployees"
                      class="flex items-center justify-between w-full border border-solid border-color-1 bg-gray-contrast text-sm rounded text-gray-900 py-1 px-3 w-full mb-2"
                      >
                      {{ selectedEmployee.name }}
                      <a class="ui-btn ui-btn-link-dark px-0" ng-click="removeSelectedEmployee(selectedEmployee)">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="grid grid-cols-1 gap-2" ng-if="selectedEmployees.length <= 0">
                    <p class="text-gray-500 text-sm">
                      No selected employees yet
                    </p>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End Employee Allocation modal -->

  <!-- Department Modal -->
  <div class="modal fade" id="{{ modals.department }}" tabindex="-1" role="dialog"
    aria-labelledby="department-modal" aria-hidden="true">
    <div class="modal-dialog max-w-2xl bg-transparent mt-32" role="document">
      <div class="modal-content">
        <div class="modal-body py-0">
          <div class="py-1 px-16">
            <form name="departmentModal" class="flex flex-col items-center justify-between space-y-6 pt-6">
              <h4 class="section-title font-bold">
                {{ isEditing() ? 'Edit Department' : 'Add Department' }}
              </h4>
              <div class="w-full">
                <div class="grid grid-cols-1 gap-4">
                  <div>
                    <label class="form-label"> Department Name </label>
                    <div class="form-input-group">
                      <input
                        class="form-input"
                        required
                        ng-model="departmentFields.name"
                        placeholder="E.g., Marketing, Engineering, Sales"
                        type="text"
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex items-center justify-between w-full pb-8">
                <div>
                  <button
                    ng-if="isEditing()"
                    ng-click="attemptDestroy('departments')"
                    class="ui-btn ui-btn-danger-outline"
                  >
                    Remove
                  </button>
                </div>
                <div class="flex items-center justify-end space-x-4 w-full">
                  <button ng-click="presentModal(modals.department, false)" type="button" class="ui-btn ui-btn-primary-outline">
                    Cancel
                  </button>
                  <button
                    type="button"
                    ng-if="isEditing()"
                    ng-disabled="!departmentModal.$dirty && departmentModal.$invalid"
                    class="ui-btn {{ departmentModal.$dirty && departmentModal.$valid ? 'ui-btn-primary' : 'ui-btn-disabled' }} w-48"
                    ng-click="saveDepartment()">
                    Update
                  </button>
                  <button
                    type="button"
                    ng-if="!isEditing()"
                    ng-disabled="departmentModal.$invalid"
                    class="ui-btn {{ departmentModal.$invalid ? 'ui-btn-disabled' : 'ui-btn-primary' }} w-48"
                    ng-click="saveDepartment()">
                    Add Department
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End department modal -->

  <!-- Confirmation modal -->
  <div class="modal fade" id="{{ modals.confirmation }}" tabindex="-1" role="dialog"
    aria-labelledby="confirmation-modal" aria-hidden="true">
    <div class="modal-dialog max-w-xl bg-transparent mt-56" role="document">
      <div class="modal-content">
        <div class="modal-body py-0">
          <div class="py-1 px-16">
            <div class="flex flex-col items-center justify-between space-y-8 pt-6">
              <h4 class="section-title font-bold">
                {{ confirmProperties.title }}
              </h4>
              <div class="flex flex-col justify-center items-center">
                <p class="helvetica-medium text-sm font-medium text-gray-900 font-semibold">
                  {{ confirmProperties.message }}
                </p>
              </div>
              <div class="flex items-center justify-end space-x-4 w-full pb-6">
                <button
                  ng-click="presentModal(modals.confirmation, false)"
                  type="button"
                  class="ui-btn ui-btn-primary-outline"
                  >
                  Cancel
                </button>
                <button
                  type="button"
                  class="ui-btn ui-btn-primary w-48"
                  ng-click="destroy()">
                  Yes, Remove
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- End department modal -->
</div>
