<div employee-overview-directive class="employee-overview-container">
  <div class="employee-overview-header">
    <div class="overview-title">
      <h1>Employee Overview</h1>
      <h4><span ng-bind="member_count"></span> total members</h4>
    </div>
    <div class="overview-menu">
      <span ng-click="_showAddFilterModal_()" class="add-filter-container">
        <img src="../assets/hr-dashboard/img/plus-gray.png"> <span>Add filter</span>
      </span>
      <form ng-submit="searchEmployee(inputSearch)" style="display: inline-block;">
        <label class="overview-input-wrapper">
          <input type="text" placeholder="Search for a member" ng-model="inputSearch">
          <i class="fa fa-search" aria-hidden="true" ng-if="!inputSearch"></i>
          <img ng-if="inputSearch" src="../assets/hr-dashboard/img/icons/cancel.png" ng-click="removeSearchEmp()">
        </label>
      </form>
      <button class="btn-export-member" ng-if="(spending_account_status.account_type != 'enterprise_plan' && (spending_account_status.medical_enabled == true || spending_account_status.wellness_enabled == true)) || (spending_account_status.account_type == 'enterprise_plan' && spending_account_status.wellness_enabled == true)" ui-sref="cred-allocation">Bulk <span ng-if="(account_plan_status.account_type == 'lite_plan') && (account_plan_status.plan_method == 'pre_paid')">Credits</span> Allocation</button>
      <button class="btn-export-member" ng-click="empDetailsLoadingState()"><img src="../assets/hr-dashboard/img/new-assets/Download.png">Export members details</button>
      <button class="btn-enroll-employees" ng-disabled="progress.in_progress == 0" ng-click="enrollMoreEmployees()">Enroll employees</button>
    </div>
  </div>
  <div class="employee-overview-table">
    <table>
      <thead>
        <tr>
          <th ng-if="employees.with_employee_id == true" class="id">ID</th>
          <th class="name-title">Name
            <div class="name-chevron-icon">
              <i class="fa fa-angle-up" aria-hidden="true"></i>
              <i class="fa fa-angle-down" aria-hidden="true"></i>
            </div>
          </th>
          <th class="status-title">Status</th>
          <th class="nric-fin-title">Mobile Number</th>
          <th class="plan-details-title">Plan details</th>
          <th class="family-coverage-title">Family coverage</th>
          <th ng-if="spending_account_status.account_type != 'enterprise_plan'" class="spending-account-medical-title">Spending account <span>(medical)</span></th>
          <th ng-if="spending_account_status.account_type != 'enterprise_plan'" class="spending-account-wellness-title">Spending account <span>(wellness)</span></th>
          <th ng-if="spending_account_status.account_type == 'enterprise_plan'" class="spending-account-visits-title">Visits</th>
          <th ng-if="spending_account_status.account_type == 'enterprise_plan' && spending_account_status.wellness_enabled == false" class="spending-account-spending-title">Spendings</th>
          <th ng-if="spending_account_status.account_type == 'enterprise_plan' && spending_account_status.wellness_enabled == true" class="spending-account-spending-title">Wellness<br>Spending Account</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="emp in employees.data" ng-click="toggleEmployee(emp, $index)">
          <td ng-if="employees.with_employee_id == true" class="id" ng-bind="emp.employee_id"></td>
          <td class="emp-name-container">
            <strong ng-bind="emp.name">Calvin Lee</strong>
          </td>
          <td class="status-details-wrapper">
            <div class="status-details-container" ng-if="emp.account_status && emp.emp_status == 'pending'">
              <span class="status-color pending"></span>
              <span>Pending</span>
            </div>
            <div class="status-details-container" ng-if="emp.account_status && emp.emp_status == 'active' || emp.account_status && emp.schedule">
              <span class="status-color active"></span>
              <span>Active</span>
            </div>
            <div class="status-details-container" ng-if="!emp.account_status || emp.emp_status == 'deleted'">
              <span class="status-color removed"></span>
              <span>Removed</span>
            </div>
            <div class="status-details-container" ng-if="emp.account_status && emp.emp_status == 'activated'">
              <span class="status-color loggedIn"></span>
              <span>Logged In</span>
            </div>
            <div class="status-expired-container" ng-if="emp.deletion || emp.schedule">
              <span ng-bind="emp.deletion_text"></span>
            </div>
          </td>
          <td class="nric-fin-details">
            <span ng-bind="emp.mobile_no == 0 ? '-' : emp.mobile_no"></span>
          </td>
          <td class="plan-start-container">
            <span ng-bind="emp.plan_tier.plan_tier_name">Tier 1</span>
            <div class="plan-details">
              <strong>Plan type: </strong>
              <span ng-bind="emp.plan_name">Pro Plan</span>
            </div>
            <div class="plan-details">
              <strong>Start date: </strong>
              <span ng-bind="emp.start_date">01/12/2018</span>
            </div>
          </td>
          <td class="family-coverage-details">
            <div class="family-dependent-details">
              <strong>Dependent: </strong>
              <span ng-bind="emp.dependents">2</span>
            </div>
          </td>
          <td ng-if="spending_account_status.account_type != 'enterprise_plan'" class="medical-details-container">
            <div class="medical-details">
              <strong>Allocation:</strong>
              <span><span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> <span
                  ng-bind="emp.spending_account.medical.credits_allocation">1,000.00</span></span>
            </div>
            <div class="medical-details">
              <strong>Balance:</strong>
              <span><span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> <span
                  ng-bind="emp.spending_account.medical.balance">1,000.00</span></span>
            </div>
          </td>
          <td ng-if="spending_account_status.account_type != 'enterprise_plan'" class="wellness-details-container">
            <div class="wellness-details">
              <strong>Allocation:</strong>
              <span><span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> <span
                  ng-bind="emp.spending_account.wellness.credits_allocation_wellness">1,000.00</span></span>
            </div>
            <div class="wellness-details">
              <strong>Balance:</strong>
              <span><span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> <span
                  ng-bind="emp.spending_account.wellness.balance">1,000.00</span></span>
            </div>
          </td>

          <td ng-if="spending_account_status.account_type == 'enterprise_plan'" class="visits-details-container">
            <div class="enterprise-details">
              <strong>Utilised:</strong>
              <span ng-bind="emp.spending_account.medical.utilised">11</span>
            </div>
            <div class="enterprise-details">
              <strong>Balance:</strong>
              <span ng-bind="emp.spending_account.medical.balance">11</span>
            </div>
          </td>

          <td ng-if="spending_account_status.account_type == 'enterprise_plan' && spending_account_status.wellness_enabled == false" class="spending-details-container">
            <div class="enterprise-details">
              <strong>Panel:</strong>
              <span>
                <span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> 
                <span ng-bind="emp.spending_account.medical.in_network | number: 2">1,000.00</span>
              </span>
            </div>
            <div class="enterprise-details">
              <strong>Non-Panel:</strong>
              <span>
                <span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> 
                <span ng-bind="emp.spending_account.medical.out_network | number: 2">1,000.00</span>
              </span>
            </div>
          </td>
          
          <td ng-if="spending_account_status.account_type == 'enterprise_plan' && spending_account_status.wellness_enabled == true" class="wellness-details-container">
            <div class="wellness-details">
              <strong>Allocation:</strong>
              <span><span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> <span
                  ng-bind="emp.spending_account.wellness.credits_allocation_wellness">1,000.00</span></span>
            </div>
            <div class="wellness-details">
              <strong>Balance:</strong>
              <span><span class="currency-type" ng-bind="emp.spending_account.currency_type"></span> <span
                  ng-bind="emp.spending_account.wellness.balance">1,000.00</span></span>
            </div>
          </td>
        </tr>
      <tbody>
    </table>

    <div ng-if="employees.data.length > 0 && (spending_account_status.medical_enabled == false && spending_account_status.wellness_enabled == false)" class="spending-not-activated-box">
      <div class="spending-border-box">
        <p>Spending Account for your company has<br>not been activated.</p>
        <a href="/sa-landing" target="_blank">Learn more >></a>
      </div>
    </div>
  </div>
  <div class="employee-pagination-wrapper employee-overview-pagination">
    <div class="employee-pagination">
      <div class="prev-pagination" ng-click="prevPage()"
        ng-class="{'active' : page_active > 1, 'disabled' : page_active < 2}">
        <i class="fa fa-angle-left" aria-hidden="true"></i>
        <span>Prev</span>
      </div>
      <span ng-repeat="list in range(employees.last_page) | limitTo:pagesToDisplay:startIndex() track by $index"
        class="numeric-pagination" ng-class="{'active' : page_active == list+1}" ng-click="goToPage(list+1)"
        ng-bind="list+1">1</span>
      <div class="next-pagination" ng-click="nextPage()"
        ng-class="{'active' : page_active < employees.last_page, 'disabled' : page_active == employees.last_page}">
        <i class="fa fa-angle-right" aria-hidden="true"></i>
        <span>Next</span>
      </div>
      <div class="per-page-pagination" x-data="{ open: false }" @click="open = true">
        <span><span ng-bind="page_ctr">10</span> per page</span>
        <i class="fa fa-angle-down" aria-hidden="true"></i>
        <div x-show="open" @click.away="open = false" class="per_page">
          <ul class="nav">
            <li><a href="javascript:void(0);" ng-click="perPage(5)">5</a></li>
            <li><a href="javascript:void(0);" ng-click="perPage(10)">10</a></li>
            <li><a href="javascript:void(0);" ng-click="perPage(20)">20</a></li>
            <li><a href="javascript:void(0);" ng-click="perPage(50)">50</a></li>
            <li><a href="javascript:void(0);" ng-click="perPage(100)">100</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>



  <div class="modal fade" id="add-filter-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true" style="background: rgba(0, 0, 0, 0.3);">
		<div class="modal-dialog" role="document" style="margin-top: 200px;">
			<div class="modal-content">
				<div class="filter-header">
					<h4>Status</h4>
					<div>
						<span ng-click="_statusClear_( global_statusData )" ng-show="global_statusData.pending == true || global_statusData.logged_in == true || global_statusData.active == true || global_statusData.removed == true">Clear</span>
					</div>
				</div>
				<div class="filter-body">
					<div class="custom-checkbox-selector">
			      <label class="selector-container">
			        <span class="text">Pending</span>
			        <input ng-model="global_statusData.pending" type="checkbox"/>
			        <span class="custom-checkbox-checkmark"></span>
			      </label>
			    </div>
			    <div class="custom-checkbox-selector">
			      <label class="selector-container">
			        <span class="text">Logged in</span>
			        <input ng-model="global_statusData.logged_in" type="checkbox"/>
			        <span class="custom-checkbox-checkmark"></span>
			      </label>
			    </div>
			    <div class="custom-checkbox-selector">
			      <label class="selector-container">
			        <span class="text">Active</span>
			        <input ng-model="global_statusData.active" type="checkbox"/>
			        <span class="custom-checkbox-checkmark"></span>
			      </label>
			    </div> 
			    <div class="custom-checkbox-selector">
			      <label class="selector-container">
			        <span class="text">Removed</span>
			        <input ng-model="global_statusData.removed" type="checkbox"/>
			        <span class="custom-checkbox-checkmark"></span>
			      </label>
			    </div>   
				</div>
				<div class="filter-footer">
					<button ng-click="_cancelModal_()" class="btn-cancel">Cancel</button>
					<button ng-click="_empApplyFilter_( global_statusData )" class="btn-apply-filter">Apply Filter</button>
				</div>
			</div>
		</div>
	</div>
</div>

<style scoped>
  @import url('../assets/hr-dashboard/templates/employeeOverview/style.css');
</style>